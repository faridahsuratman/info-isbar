@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

:root {
    /* Brand: Purple + Orange */
    --brand: #7c3aed;
    /* purple-600 */
    --brand-700: #6d28d9;
    /* purple-700 */
    --warm: #f97316;
    /* orange-500 */
    --warm-700: #ea580c;
    /* orange-600 */
    --success: #059669;
    /* emerald-600 */
    --danger: #dc2626;
    /* red-600 */
    --ink: #0f172a;
    /* slate-900 */
}

* {
    font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif
}

/* Shell */
.app-shell {
    display: grid;
    grid-template-columns: 280px 1fr;
    min-height: 100dvh;
}

@media (max-width: 1024px) {
    .app-shell {
        grid-template-columns: 1fr;
    }

    .sidebar {
        position: fixed;
        inset: 0 auto 0 0;
        width: 280px;
        transform: translateX(-100%);
        transition: transform .25s ease;
        z-index: 50;
    }

    .sidebar.open {
        transform: translateX(0);
    }

    .backdrop {
        position: fixed;
        inset: 0;
        background: rgba(2, 6, 23, .5);
        backdrop-filter: blur(2px);
        display: none;
        z-index: 40;
    }

    .backdrop.show {
        display: block;
    }

    .prose,
    pre,
    textarea {
        overflow: auto;
    }

    #scriptBox {
        max-height: 560px;
    }

    #inputsWrap textarea {
        min-height: 160px;
    }

}

/* Components */
.card {
    background: #fff;
    border: 1px solid rgb(226, 232, 240);
    border-radius: 16px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, .03), 0 10px 24px -18px rgba(2, 6, 23, .18);
}

.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: .5rem;
    padding: .625rem .875rem;
    border-radius: .75rem;
    border: 1px solid rgb(226, 232, 240);
    background: #f6c1f7;
    color: #0f172a;
    font-weight: 600;
    transition: background .2s ease, box-shadow .2s ease, border-color .2s ease, filter .2s ease;
}

.btn:hover {
    background: #f8fafc;
}

/* Primary now purple→orange */
.btn-primary {
    border-color: transparent;
    color: #fff;
    background: linear-gradient(90deg, var(--brand), var(--warm));
}

.btn-primary:hover {
    filter: brightness(.96);
}

.btn-success {
    border-color: transparent;
    color: #fff;
    background: linear-gradient(90deg, var(--success), #047857);
}

.btn-danger {
    border-color: transparent;
    color: #fff;
    background: linear-gradient(90deg, var(--danger), #b91c1c);
}

.pill {
    display: inline-block;
    padding: .35rem .7rem;
    border-radius: 9999px;
    font-weight: 700;
    font-size: .75rem;
    border: 1px solid rgb(226, 232, 240);
    background: #fff;
    color: #334155;
}

.nav-link {
    display: flex;
    align-items: center;
    gap: .75rem;
    padding: .625rem .75rem;
    border-radius: .625rem;
    font-weight: 600;
    color: #475569;
    position: relative;
}

.nav-link:hover {
    background: #f1f5f9;
    color: #111827;
}

/* Active: soft purple bg + orange indicator */
.nav-link.active {
    background: rgba(124, 58, 237, .08);
    color: var(--brand);
    box-shadow: inset 4px 0 0 var(--warm);
}

.progress-bar {
    height: 8px;
    background: #e5e7eb;
    border-radius: 9999px;
    overflow: hidden;
}

/* Progress now purple→orange */
.progress-fill {
    height: 100%;
    width: 0%;
    border-radius: 9999px;
    background: linear-gradient(90deg, var(--brand), var(--warm));
    transition: width .4s ease;
}

/* Decorative: subtle purple frame on brand icon blocks */
.brand-chip {
    background: rgba(124, 58, 237, .08);
    border: 1px solid rgba(124, 58, 237, .20);
}

/* Ensure nothing is clipped in cards/panels */
.view-panel,
#introHost,
#guideHost,
#resourcesHost {
    min-width: 0;
}

.card,
.card * {
    min-width: 0;
}

/* Let long words/inline SVG wrap safely */
.break-words {
    overflow-wrap: anywhere;
    word-break: break-word;
}

/* Images/SVGs inside loaded modules scale down */
#introHost img,
#introHost svg,
#guideHost img,
#guideHost svg,
#resourcesHost img,
#resourcesHost svg {
    max-width: 100%;
    height: auto;
}

/* Guide module hardening (prevents prose overrides & ensures visibility) */
#guideHost #guide-root .card li {
    color: #0f172a !important;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
}

#guideHost #guide-root .tick {
    width: 1.125rem;
    height: 1.125rem;
    color: #059669;
    flex-shrink: 0;
    margin-top: 0.15rem;
    fill: currentColor;
}

#guideHost #guide-root .tick path {
    fill: currentColor !important;
}

#guideHost #guide-root svg,
#guideHost #guide-root img {
    max-width: 100%;
    height: auto;
}

/* Avoid any hidden overflow on cards */
.card {
    overflow: visible;
}

.min-w-0 {
    min-width: 0 !important;
}

.break-words {
    overflow-wrap: anywhere;
    word-break: break-word;
}

.prose img,
.prose svg {
    max-width: 100%;
    height: auto;
}

.card {
    overflow: visible;
}

.min-w-0 {
    min-width: 0 !important;
}

.flex-1 {
    min-width: 0 !important;
}

.break-words {
    overflow-wrap: anywhere;
    word-break: break-word;
}

.prose img,
.prose svg {
    max-width: 100%;
    height: auto;
}

.prose :where(li, p, h1, h2, h3, h4, h5, h6) {
    overflow-wrap: anywhere;
    word-break: break-word;
}

#introHost {
    min-width: 0;
}

/* Print */
@media print {
    .no-print {
        display: none !important;
    }

    .card {
        box-shadow: none !important;
        border: 1px solid #e5e7eb;
    }

    body {
        background: #fff !important;
    }

    .nav-link.active {
        box-shadow: none;
    }
}

/* ====== Sidebar: color + animation (light only) ====== */
:root{
  --brand:#7c3aed;
  --warm:#f97316;
  --ink:#0f172a;
  --line:#e2e8f0;

  --sb-grad: linear-gradient(135deg, #7c3aed 0%, #f97316 100%);
  --sb-chip-glow: 0 12px 28px -14px rgba(124,58,237,.45), 0 8px 22px -12px rgba(249,115,22,.35);
  --sb-soft-shadow: 0 10px 24px -18px rgba(2,6,23,.18);
}

/* container: subtle patterned light background + top gradient edge */
.neo-sidebar{
  position: relative;
  background:
    radial-gradient(800px 160px at 0% -4%, rgba(124,58,237,.06), transparent 60%),
    linear-gradient(180deg, rgba(124,58,237,.05), transparent 30%),
    #fff;
  box-shadow: inset -1px 0 0 var(--line);
  animation: slideInSidebar .45s ease-out both;
}

@keyframes slideInSidebar{
  from{ opacity:0; transform: translateX(-8px); }
  to  { opacity:1; transform: translateX(0); }
}

/* header row underline with gradient */
.neo-sidebar .px-5.py-5{
  position: relative;
}
.neo-sidebar .px-5.py-5::after{
  content:"";
  position:absolute; left:0; right:0; bottom:-1px; height:2px;
  background: var(--sb-grad);
  opacity:.35;
}

/* brand chip: gradient ring + gentle pulsing glow */
.brand-chip{
  position: relative;
  border:1px solid rgba(124,58,237,.18);
  background: rgba(124,58,237,.06);
}
.brand-chip::before{
  content:"";
  position:absolute; inset:-2px;
  border-radius:12px;
  background: conic-gradient(from 140deg, #7c3aed, #f97316, #7c3aed);
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  padding:2px;
  opacity:.8;
  filter: blur(.3px);
  pointer-events:none;
}
@media (prefers-reduced-motion:no-preference){
  .brand-chip{ animation: chipGlow 2.8s ease-in-out infinite; }
  @keyframes chipGlow{
    0%,100%{ box-shadow: var(--sb-chip-glow); transform: translateY(0); }
    50%    { box-shadow: 0 16px 38px -18px rgba(124,58,237,.55), 0 10px 26px -16px rgba(249,115,22,.45); transform: translateY(-1px); }
  }
}

/* nav-link base reset (keeps your markup) */
.nav-link{
  width:100%;
  display:flex; align-items:center; gap:.6rem;
  padding:.6rem .7rem;
  border-radius:10px;
  font-weight:600;
  color:#334155;
  background:#fff;
  border:1px solid transparent;
  transition: transform .18s ease, background .18s ease, border-color .18s ease, color .18s ease, box-shadow .18s ease;
  position: relative;
}
.nav-link svg{
  width:20px; height:20px; stroke: currentColor; opacity:.9;
  transition: transform .18s ease, opacity .18s ease, color .18s ease;
}

/* hover: lift, soft tint */
.nav-link:hover{
  transform: translateY(-1px);
  background: rgba(124,58,237,.06);
  border-color: rgba(124,58,237,.18);
  box-shadow: var(--sb-soft-shadow);
  color:#3b2bb3;
}
.nav-link:hover svg{ opacity:1; transform: translateX(1px); }

/* active: left gradient rail + bold color */
.nav-link.active{
  color:#3b2bb3;
  background:#fff;
  border-color: rgba(124,58,237,.28);
  box-shadow: 0 8px 22px -16px rgba(59,43,179,.25);
}
.nav-link.active::before{
  content:"";
  position:absolute; left:-4px; top:8px; bottom:8px; width:4px;
  border-radius:8px;
  background: var(--sb-grad);
}

/* focus ring (keyboard) */
.nav-link:focus-visible{
  outline:2px solid transparent;
  box-shadow: 0 0 0 3px rgba(124,58,237,.28);
}

/* press micro-interaction */
.nav-link:active{ transform: translateY(0); }

/* progress bar (striped + animated) */
.progress-bar{
  width:100%; height:10px; border-radius:999px;
  background: #eef2ff; border:1px solid #e5e7eb;
  overflow:hidden; position:relative;
}
.progress-fill{
  height:100%; width:0%;
  background-image:
    linear-gradient(90deg, #7c3aed, #f97316),
    repeating-linear-gradient(45deg, rgba(255,255,255,.35) 0 10px, rgba(255,255,255,0) 10px 20px);
  background-blend-mode: overlay;
  border-radius:999px;
  transition: width .4s ease-in-out;
  box-shadow: inset 0 0 10px rgba(255,255,255,.2);
}
@media (prefers-reduced-motion:no-preference){
  .progress-fill{
    animation: progressStripes 1.2s linear infinite;
    background-size: 100% 100%, 28px 28px;
  }
  @keyframes progressStripes{
    from{ background-position: 0 0, 0 0; }
    to  { background-position: 0 0, 28px 0; }
  }
}

/* tiny helper to keep SVGs tidy */
.sidebar .nav-link svg{ flex:0 0 20px; }

.neo-sidebar .min-w-0 {
  position: relative;
  background: linear-gradient(90deg, rgba(124,58,237,.08) 25%, rgba(249,115,22,.12) 50%, rgba(124,58,237,.08) 75%);
  background-size: 200% 100%;
  padding: 6px 10px;
  border-radius: 10px;
  animation: shimmer 5s ease-in-out infinite;
}
.neo-sidebar .min-w-0 .font-extrabold {
  background: linear-gradient(90deg, #7c3aed, #f97316, #7c3aed);
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: textMove 6s linear infinite;
}
